Metadata-Version: 2.4
Name: any-mcp
Version: 0.2.0
Summary: Universal adapter that safely starts any MCP package and provides unified tool access
Author-email: "AI @ dscubed" <contact@dscubed.ai>
License: MIT
Project-URL: Homepage, https://github.com/ai-dscubed/any-mcp
Project-URL: Documentation, https://github.com/ai-dscubed/any-mcp/blob/main/README.md
Project-URL: Repository, https://github.com/ai-dscubed/any-mcp
Project-URL: Issues, https://github.com/ai-dscubed/any-mcp/issues
Classifier: Development Status :: 4 - Beta
Classifier: Intended Audience :: Developers
Classifier: License :: OSI Approved :: MIT License
Classifier: Programming Language :: Python :: 3
Classifier: Programming Language :: Python :: 3.11
Classifier: Programming Language :: Python :: 3.12
Classifier: Topic :: Software Development :: Libraries :: Python Modules
Classifier: Topic :: Internet :: WWW/HTTP :: HTTP Servers
Requires-Python: >=3.11
Description-Content-Type: text/markdown
Requires-Dist: mcp>=1.0.0
Requires-Dist: fastapi>=0.104.0
Requires-Dist: uvicorn[standard]>=0.24.0
Requires-Dist: pydantic>=2.5.0
Requires-Dist: pyyaml>=6.0.1
Requires-Dist: anthropic>=0.7.0
Requires-Dist: prompt-toolkit>=3.0.0
Requires-Dist: rich>=13.0.0
Requires-Dist: python-dotenv>=1.0.0
Requires-Dist: asyncio-mqtt>=0.13.0
Provides-Extra: dev
Requires-Dist: pytest>=7.4.0; extra == "dev"
Requires-Dist: pytest-asyncio>=0.21.0; extra == "dev"
Requires-Dist: pytest-cov>=4.1.0; extra == "dev"
Requires-Dist: black>=23.0.0; extra == "dev"
Requires-Dist: flake8>=6.0.0; extra == "dev"
Requires-Dist: mypy>=1.7.0; extra == "dev"
Requires-Dist: pre-commit>=3.5.0; extra == "dev"
Provides-Extra: test
Requires-Dist: pytest>=7.4.0; extra == "test"
Requires-Dist: pytest-asyncio>=0.21.0; extra == "test"
Requires-Dist: pytest-cov>=4.1.0; extra == "test"
Requires-Dist: httpx>=0.25.0; extra == "test"
Requires-Dist: pytest-mock>=3.12.0; extra == "test"
Provides-Extra: docs
Requires-Dist: mkdocs>=1.5.0; extra == "docs"
Requires-Dist: mkdocs-material>=9.4.0; extra == "docs"
Requires-Dist: mkdocstrings[python]>=0.24.0; extra == "docs"

# any-mcp

A universal adapter that safely starts any MCP package, discovers available tools, and provides a unified interface for users and LLMs to interact with them through a single, standardized API.

## Mission

Build **one adapter layer** that lets LLMs plug-and-play with *any* third-party MCP found on the internet—no bespoke coding required each time.

## Key Features

- **Universal Adapter**: One interface for all MCPs regardless of underlying implementation
- **Auto-Discovery**: Automatically detect and catalog available tools from any MCP
- **Multi-Source Installation**: Install MCPs from Docker, local files, or registry
- **Web API**: RESTful interface for remote MCP management and tool calling
- **Robust Error Handling**: Comprehensive error handling with retries and circuit breakers
- **Health Monitoring**: Real-time health checks and status monitoring
- **Production Ready**: Includes configuration management, logging, and cleanup

## Architecture

```mermaid
graph TD
    subgraph "User Layer"
        A[User Query] --> B[CLI/Web API]
    end
    
    subgraph "AI Engine"
        B --> C[Claude LLM]
        C --> D[ToolManager]
    end
    
    subgraph "MCP Layer"
        D --> E[MCPManager]
        E --> F[GitHub MCP]
        E --> G[Calculator MCP]
        E --> H[Documents MCP]
        E --> I[Any MCP...]
    end
    
    subgraph "Sources"
        F --> J[Docker Image]
        G --> K[Local Script]
        H --> L[Local Server]
        I --> M[Registry/Custom]
    end
    
    subgraph "External APIs"
        J --> N[GitHub API]
        K --> O[Math Operations]
        L --> P[File System]
        M --> Q[Any API]
    end
    
    %% Config
    R[mcp_config.yaml] --> E
    
    %% Flow
    C -.->|Auto-registers tools| D
    D -.->|Routes calls| E
    
    %% Styling
    style C fill:#e1f5fe
    style E fill:#e8f5e8
    style J fill:#fff3e0
    style K fill:#fff3e0
    style L fill:#fff3e0
    style M fill:#fff3e0
```

### Core Components

1. **MCP Installer** (`mcp_installer.py`) - Multi-source MCP package installer supporting Docker, local files, and registry with YAML-based configuration management
2. **MCP Manager** (`mcp_manager.py`) - Lifecycle management, health monitoring, and tool orchestration for multiple MCP servers
3. **MCP Client** (`mcp_client.py`) - Enhanced client with complete tool discovery and calling capabilities with robust error handling
4. **Web API** (`api/web_mcp.py`) - FastAPI-based HTTP interface for all MCP operations with RESTful endpoints
5. **Error Handling** (`core/error_handling.py`) - Comprehensive error handling with circuit breakers, retries, and error aggregation
6. **CLI Interface** (`core/cli.py`, `core/cli_chat.py`) - Interactive command-line interface for MCP management and chat
7. **Claude Integration** (`core/claude.py`) - Direct integration with Anthropic's Claude API for LLM interactions
8. **Tool Management** (`core/tools.py`) - Centralized tool discovery and management across all MCPs

## Quick Start

### Installation

```bash
# Install dependencies
pip install -e .

# Copy example configuration
cp example_mcp_config.yaml mcp_config.yaml

# Set environment variables (optional)
export GITHUB_TOKEN=your_github_token_here
export USE_UV=1  # Use uv for faster Python execution
```

### Basic Usage

#### 1. Command Line Interface

```bash
# Run the enhanced CLI with multiple MCPs
python main.py

# Or run with specific MCP servers
python main.py demos/mcp_calc_server.py
```

#### 2. Web API Server

```bash
# Start the web API server
python -m api.web_mcp

# Or use uvicorn directly
uvicorn api.web_mcp:app --host 0.0.0.0 --port 8000 --reload
```

#### 3. Programmatic Usage

```python
from mcp_manager import MCPManager
from mcp_installer import MCPInstaller

# Install an MCP
installer = MCPInstaller()
installer.install_mcp(
    name="github",
    source="docker://ghcr.io/github/github-mcp-server",
    env_vars={"GITHUB_TOKEN": "your_token"}
)

# Use the MCP
async with MCPManager() as manager:
    # List available tools
    tools = await manager.list_mcp_tools("github")
    
    # Call a tool
    result = await manager.call_mcp(
        "github", 
        "search_repositories", 
        {"query": "mcp language:python"}
    )
```

### Web API Examples

```bash
# List all MCPs
curl http://localhost:8000/mcp

# Install a new MCP
curl -X POST http://localhost:8000/mcp/install \
  -H "Content-Type: application/json" \
  -d '{
    "name": "calculator",
    "source": "local://./demos/mcp_calc_server.py",
    "description": "Calculator MCP for math operations"
  }'

# Call a tool
curl -X POST http://localhost:8000/mcp/calculator/call \
  -H "Content-Type: application/json" \
  -d '{
    "tool_name": "add",
    "args": {"a": 5, "b": 3}
  }'

# Check MCP health
curl http://localhost:8000/mcp/calculator/health
```

## Configuration

Create a `mcp_config.yaml` file to define your MCPs:

```yaml
installed_mcps:
  github:
    type: "docker"
    source: "ghcr.io/github/github-mcp-server"
    description: "GitHub's official MCP server"
    env_vars:
      GITHUB_PERSONAL_ACCESS_TOKEN: "${GITHUB_TOKEN}"
    enabled: true

  calculator:
    type: "local"
    source: "./demos/mcp_calc_server.py"
    description: "Mathematical operations"
    enabled: true
```

## Supported MCP Sources

### Docker MCPs
```bash
# Install from Docker registry
installer.install_mcp(
    "github",
    "docker://ghcr.io/github/github-mcp-server"
)
```

### Local MCPs
```bash
# Install from local file
installer.install_mcp(
    "calculator",
    "local://./demos/mcp_calc_server.py"
)
```

### Registry MCPs (Future)
```bash
# Install from MCP registry (planned)
installer.install_mcp(
    "financial",
    "registry://financial-data-mcp"
)
```

## Demo Scripts

Run the included demonstrations:

```bash
# Simple conceptual demo
python demos/simple_demo.py

# Real GitHub MCP integration
python demos/real_github_demo.py

# Calculator MCP demo
python demos/calc_demo.py

# Basic GitHub MCP demo
python demos/github_mcp_demo.py
```

## Error Handling and Resilience

The system includes comprehensive error handling:

- **Custom Exception Types**: Specific exceptions for different error scenarios
- **Retry Logic**: Automatic retries with exponential backoff
- **Circuit Breakers**: Prevent cascading failures
- **Timeout Protection**: Configurable timeouts for all operations
- **Error Aggregation**: Collect and analyze errors for monitoring

## API Documentation

When running the web API, visit:
- **API Docs**: http://localhost:8000/docs
- **ReDoc**: http://localhost:8000/redoc
- **Health Check**: http://localhost:8000/health

## Development

### Project Structure

```
mcp/
├── api/                    # Web API implementation
│   ├── web_mcp.py         # FastAPI application with RESTful endpoints
│   └── __init__.py
├── core/                   # Core functionality
│   ├── chat.py            # Chat interface for LLM interactions
│   ├── claude.py          # Claude API integration
│   ├── cli_chat.py        # CLI chat implementation
│   ├── cli.py             # Command line interface
│   ├── tools.py           # Tool management and discovery
│   └── error_handling.py  # Error handling system with circuit breakers
├── demos/                  # Example MCPs and demos
│   ├── calc_demo.py       # Calculator demo
│   ├── github_mcp_demo.py # GitHub MCP demo
│   ├── mcp_calc_server.py # Calculator MCP server
│   ├── real_github_demo.py # Real GitHub integration
│   └── simple_demo.py     # Basic demonstration
├── mcps/                   # Installed local MCPs
├── mcp_client.py          # Enhanced MCP client with tool discovery
├── mcp_installer.py       # Multi-source MCP installation system
├── mcp_manager.py         # MCP lifecycle management and orchestration
├── mcp_server.py          # Document MCP server
├── main.py                # Main application entry point
├── example_mcp_config.yaml # Example configuration
└── README.md              # This file
```

### Running Tests

```bash
# Install test dependencies
pip install pytest pytest-asyncio

# Run tests
pytest tests/ -v

# Run with coverage
pytest tests/ --cov=. --cov-report=html
```

## Production Deployment

### Environment Variables

```bash
export CLAUDE_MODEL=claude-3-sonnet-20240229
export ANTHROPIC_API_KEY=your_anthropic_key
export GITHUB_TOKEN=your_github_token
export USE_UV=1
export LOG_LEVEL=INFO
```

### Docker Deployment

```dockerfile
FROM python:3.11-slim

WORKDIR /app
COPY . .
RUN pip install -e .

EXPOSE 8000
CMD ["uvicorn", "api.web_mcp:app", "--host", "0.0.0.0", "--port", "8000"]
```

### Health Monitoring

The system provides comprehensive health monitoring:

```bash
# Check overall system health
curl http://localhost:8000/health

# Check specific MCP health
curl http://localhost:8000/mcp/github/health

# Get detailed status of all MCPs
curl http://localhost:8000/mcp
```


## Contributing

1. Fork the repository
2. Create a feature branch (`git checkout -b feature/amazing-feature`)
3. Commit your changes (`git commit -m 'Add amazing feature'`)
4. Push to the branch (`git push origin feature/amazing-feature`)
5. Open a Pull Request

## License

This project is licensed under the MIT License - see the [LICENSE](LICENSE) file for details.

## Support

For questions and support:
- Create an issue on GitHub
- Check the [API documentation](http://localhost:8000/docs) when running the server
- Review the example configurations and demos
